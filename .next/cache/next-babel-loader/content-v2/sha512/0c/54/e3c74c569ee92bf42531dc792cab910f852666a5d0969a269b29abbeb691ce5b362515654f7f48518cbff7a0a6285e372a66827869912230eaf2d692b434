{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport useSWR from \"swr\";\nexport var usePosts = function usePosts(posts) {\n  _s();\n\n  var _useSWR = useSWR(\"/api/posts\", {\n    initialData: posts,\n    onErrorRetry: function onErrorRetry(error, key, config, revalidate, _ref) {\n      var retryCount = _ref.retryCount;\n      console.log(\"error try\"); // Never retry on 404.\n\n      if (error.status === 404) return; // Never retry for a specific key.\n\n      if (key === \"/api/user\") return; // Only retry up to 10 times.\n\n      if (retryCount >= 10) return; // Retry after 5 seconds.\n\n      setTimeout(function () {\n        return revalidate({\n          retryCount: retryCount\n        });\n      }, 5000);\n    }\n  }),\n      data = _useSWR.data,\n      error = _useSWR.error;\n\n  return {\n    data: data,\n    isLoading: !error && !data,\n    error: error\n  };\n};\n\n_s(usePosts, \"r2QYs02BSrn+Eu/1uMGZi8N+HnQ=\", false, function () {\n  return [useSWR];\n});","map":{"version":3,"sources":["D:/projects/blog/hooks/usePosts.js"],"names":["useSWR","usePosts","posts","initialData","onErrorRetry","error","key","config","revalidate","retryCount","console","log","status","setTimeout","data","isLoading"],"mappings":";;AAAA,OAAOA,MAAP,MAAmB,KAAnB;AAEA,OAAO,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAACC,KAAD,EAAW;AAAA;;AAAA,gBACTF,MAAM,eAAe;AAC3CG,IAAAA,WAAW,EAAED,KAD8B;AAG3CE,IAAAA,YAAY,EAAE,sBAACC,KAAD,EAAQC,GAAR,EAAaC,MAAb,EAAqBC,UAArB,QAAoD;AAAA,UAAjBC,UAAiB,QAAjBA,UAAiB;AAChEC,MAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EADgE,CAEhE;;AACA,UAAIN,KAAK,CAACO,MAAN,KAAiB,GAArB,EAA0B,OAHsC,CAKhE;;AACA,UAAIN,GAAG,KAAK,WAAZ,EAAyB,OANuC,CAQhE;;AACA,UAAIG,UAAU,IAAI,EAAlB,EAAsB,OAT0C,CAWhE;;AACAI,MAAAA,UAAU,CAAC;AAAA,eAAML,UAAU,CAAC;AAAEC,UAAAA,UAAU,EAAVA;AAAF,SAAD,CAAhB;AAAA,OAAD,EAAmC,IAAnC,CAAV;AACD;AAhB0C,GAAf,CADG;AAAA,MACzBK,IADyB,WACzBA,IADyB;AAAA,MACnBT,KADmB,WACnBA,KADmB;;AAoBjC,SAAO;AACLS,IAAAA,IAAI,EAAJA,IADK;AAELC,IAAAA,SAAS,EAAE,CAACV,KAAD,IAAU,CAACS,IAFjB;AAGLT,IAAAA,KAAK,EAALA;AAHK,GAAP;AAKD,CAzBM;;GAAMJ,Q;UACaD,M","sourcesContent":["import useSWR from \"swr\";\r\n\r\nexport const usePosts = (posts) => {\r\n  const { data, error } = useSWR(`/api/posts`, {\r\n    initialData: posts,\r\n\r\n    onErrorRetry: (error, key, config, revalidate, { retryCount }) => {\r\n      console.log(\"error try\");\r\n      // Never retry on 404.\r\n      if (error.status === 404) return;\r\n\r\n      // Never retry for a specific key.\r\n      if (key === \"/api/user\") return;\r\n\r\n      // Only retry up to 10 times.\r\n      if (retryCount >= 10) return;\r\n\r\n      // Retry after 5 seconds.\r\n      setTimeout(() => revalidate({ retryCount }), 5000);\r\n    },\r\n  });\r\n\r\n  return {\r\n    data,\r\n    isLoading: !error && !data,\r\n    error,\r\n  };\r\n};\r\n"]},"metadata":{},"sourceType":"module"}